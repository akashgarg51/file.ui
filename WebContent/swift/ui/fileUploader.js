jQuery.sap.declare("swift.ui.fileUploader");
jQuery.sap.require("sap.ui.unified.FileUploader");
sap.ui.unified.FileUploader.extend("fileUploader", {
	that : this,
	upload : function(file, filePath) {
		var oProgressIndicator = sap.ui.getCore().byId("progressindicator");
		var oDialog = sap.ui.getCore().byId("myDialog");
		try {
			jQuery.ajax({
				type: "PUT",
		//		url: "http://localhost:8082/Files/Things/" + filePath,
				url: "https://appiot-fs-ci.cfapps.staging.sic.ondemand.com/Files/Things/" + filePath,
				headers: {
					"Authorization": "Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIxZTU4MDBjMC01NzExLTQxNGUtYmM4NS02YjlmZGY3YjY2MGMiLCJzdWIiOiI1MmNiMzAxOC0yMjM2LTRmZjAtYjM5ZS1lMjNmMGY5NGEzMGEiLCJzY29wZSI6WyJjb25mX2NpLlJlYWQiLCJsb2NfY2kuUmVhZCIsInRlbmFudF9jaS5DcmVhdGUiLCJ0aGluZ19jaS5TeXNBZG1pbiIsImJwX2NpLkNvbmZpZ3VyYXRpb24uUmVhZCIsInRoaW5nX2NpLmQiLCJ0aGluZ19jaS5jIiwiYnBfY2kuYyIsImJwX2NpLkNvbmZpZ3VyYXRpb24uRGVsZXRlIiwiYnBfY2kuZCIsInRlbmFudF9jaS5vcmcuZCIsInRlbmFudF9jaS5vcmcuYyIsImNvbmZfY2kuQ3JlYXRlIiwidGhpbmdfY2kuUmVhZCIsInRoaW5nX2NpLkNvbmZpZ3VyYXRpb24uUmVhZCIsImJwX2NpLnIiLCJ0aGluZ19jaS5FdmVudC5DcmVhdGUiLCJ0ZW5hbnRfY2kudGVuYW50LmQiLCJ0aGluZ19jaS5yIiwidGVuYW50X2NpLnRlbmFudC5jIiwidGhpbmdfY2kuRXZlbnQuciIsImJwX2NpLnUiLCJ0ZW5hbnRfY2kub3JnLnUiLCJicF9jaS50ZW5hbnQuYyIsImJwX2NpLnRlbmFudC5kIiwiYXV0aF9jaS5kIiwidGVuYW50X2NpLm9yZy5yIiwidGhpbmdfY2kuRGVsZXRlIiwiYXV0aF9jaS5jIiwidGhpbmdfY2kuRXZlbnQudSIsInRlbmFudF9jaS5SZWFkIiwiZmlsZV9jaS5TeXNBZG1pbiIsImN0X2NpLnIiLCJsb2NfY2kuQ3JlYXRlIiwidGVuYW50X2NpLnRlbmFudC5yIiwidGhpbmdfY2kuRXZlbnQuRGVsZXRlIiwiY29sZHN0b3JlX2NpLlN5c0FkbWluIiwiY29sZHN0b3JlX2NpLnIiLCJmaWxlX2NpLkNyZWF0ZSIsInRlbmFudF9jaS50ZW5hbnQudSIsImJwX2NpLlVwZGF0ZSIsImNvbmZfY2kuU3lzQWRtaW4iLCJvcGVuaWQiLCJicF9jaS5PbmJvYXJkVGVuYW50IiwibG9jX2NpLlVwZGF0ZSIsImF1dGhfY2kuQ29uZmlndXJhdGlvbi5DcmVhdGUiLCJhdXRoX2NpLnIiLCJ0aGluZ19jaS5FdmVudC5kIiwidGhpbmdfY2kuRXZlbnQuYyIsImF1dGhfY2kudSIsImF1dGhfY2kuVXBkYXRlIiwidGVuYW50X2NpLkRlbGV0ZSIsInRoaW5nX2NpLkNvbmZpZ3VyYXRpb24uQ3JlYXRlIiwieHNfYXV0aG9yaXphdGlvbi5yZWFkIiwiYnBfY2kuQ29uZmlndXJhdGlvbi5DcmVhdGUiLCJ0ZGVfY2kuU3lzQWRtaW4iLCJjb25mX2NpLkRlbGV0ZSIsImJwX2NpLkNyZWF0ZSIsImF1dGhfY2kuQ3JlYXRlIiwidGhpbmdfY2kuQ29uZmlndXJhdGlvbi5EZWxldGUiLCJ0aGluZ19jaS5DcmVhdGUiLCJ0ZW5hbnRfY2kucGVycy5yIiwidGRlX2NpLnIiLCJicF9jaS5SZWFkIiwiZmlsZV9jaS5EZWxldGUiLCJhdXRoX2NpLkNvbmZpZ3VyYXRpb24uRGVsZXRlIiwiYnBfY2kuU2VsZlNlcnZpY2UiLCJ0ZW5hbnRfY2kucGVycy51IiwidGRlX2NpLmQiLCJ0ZGVfY2kuYyIsInRoaW5nX2NpLkV2ZW50LlJlYWQiLCJhdXRoX2NpLkNvbmZpZ3VyYXRpb24uUmVhZCIsImJwX2NpLnRlbmFudC5yIiwiYnBfY2kudGVuYW50LnUiLCJhdXRoX2NpLkNyb3NzVGVuYW50TWFpbnRlbmFuY2UiLCJhdXRoX2NpLkRlbGV0ZSIsImF1dGhfY2kub2dhLmMiLCJhdXRoX2NpLm9nYS5kIiwiYnBfY2kuRGVsZXRlIiwieHNfYXV0aG9yaXphdGlvbi53cml0ZSIsInRlbmFudF9jaS5VcGRhdGUiLCJsb2NfY2kucGQiLCJ0ZW5hbnRfY2kucGVycy5kIiwidGVuYW50X2NpLnBlcnMuYyIsImF1dGhfY2kuUmVhZCIsImF1dGhfY2kuY3RtIiwiY3RvZGF0YV9jaS5yIiwidGhpbmdfY2kuRXZlbnQuVXBkYXRlIiwiYXV0aF9jaS5vZ2EuciIsImJwX2NpLlBoeXNpY2FsRGVsZXRlIiwiZmlsZV9jaS5SZWFkIiwiYXV0aF9jaS5vZ2EudSJdLCJjbGllbnRfaWQiOiJzYi1pb3Rhc19jaSIsImNpZCI6InNiLWlvdGFzX2NpIiwiYXpwIjoic2ItaW90YXNfY2kiLCJncmFudF90eXBlIjoiYXV0aG9yaXphdGlvbl9jb2RlIiwidXNlcl9pZCI6IjUyY2IzMDE4LTIyMzYtNGZmMC1iMzllLWUyM2YwZjk0YTMwYSIsInVzZXJfbmFtZSI6InRlc3R1c2VyIiwiZW1haWwiOiJ0ZXN0dXNlckB1bmtub3duLm9yZyIsImdpdmVuX25hbWUiOiJ0ZXN0dXNlciIsImZhbWlseV9uYW1lIjoidW5rbm93bi5vcmciLCJpYXQiOjE0NzUyMzQ3MzIsImV4cCI6MTQ3NTI3NzkzMiwiaXNzIjoiaHR0cDovL2NvbS1zYXAubG9jYWxob3N0OjgwODAvdWFhL29hdXRoL3Rva2VuIiwiemlkIjoiY29tLXNhcCIsImhkYi5uYW1lZHVzZXIuc2FtbCI6Ijw_eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCI_PjxzYW1sMjpBc3NlcnRpb24geG1sbnM6c2FtbDI9XCJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6YXNzZXJ0aW9uXCIgSUQ9XCJfMTdlNGY1Y2EtNzE3Ny00MjQ4LWI1NTctZDViMzhmZjcxMzg5XCIgSXNzdWVJbnN0YW50PVwiMjAxNi0wOS0zMFQxMToyMDozMi4wODJaXCIgVmVyc2lvbj1cIjIuMFwiPjxzYW1sMjpJc3N1ZXI-YXV0aGVudGljYXRpb24uc3RhZ2luZy5zaWMub25kZW1hbmQuY29tPC9zYW1sMjpJc3N1ZXI-PGRzOlNpZ25hdHVyZSB4bWxuczpkcz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDkveG1sZHNpZyNcIj48ZHM6U2lnbmVkSW5mbz48ZHM6Q2Fub25pY2FsaXphdGlvbk1ldGhvZCBBbGdvcml0aG09XCJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzEwL3htbC1leGMtYzE0biNcIi8-PGRzOlNpZ25hdHVyZU1ldGhvZCBBbGdvcml0aG09XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwLzA5L3htbGRzaWcjcnNhLXNoYTFcIi8-PGRzOlJlZmVyZW5jZSBVUkk9XCIjXzE3ZTRmNWNhLTcxNzctNDI0OC1iNTU3LWQ1YjM4ZmY3MTM4OVwiPjxkczpUcmFuc2Zvcm1zPjxkczpUcmFuc2Zvcm0gQWxnb3JpdGhtPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnI2VudmVsb3BlZC1zaWduYXR1cmVcIi8-PGRzOlRyYW5zZm9ybSBBbGdvcml0aG09XCJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzEwL3htbC1leGMtYzE0biNcIi8-PC9kczpUcmFuc2Zvcm1zPjxkczpEaWdlc3RNZXRob2QgQWxnb3JpdGhtPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnI3NoYTFcIi8-PGRzOkRpZ2VzdFZhbHVlPk4xSm9jcW42N2pvdi90VXM4WDFLbDNpbkVLOD08L2RzOkRpZ2VzdFZhbHVlPjwvZHM6UmVmZXJlbmNlPjwvZHM6U2lnbmVkSW5mbz48ZHM6U2lnbmF0dXJlVmFsdWU-WTFjUmhCOXJKWW9QZjUyZ29HKy9icWZnaXpranpsQk50SWZ2QjJZdDFCelFOd2JmaHMydnFWZkFEaEYwbVZKaEZnbCtSaEtlRHUyMnhKVmI4V3o5RGxOQUlkbll1RmhWSEJuNHNzOEpJNllmWU5QQVpCRXczYmhBOVYrUFdyYVlaZlBYKzlxTkZlUFZFdGZQM3NLNHAzcEdtM2srMjFyRFV4QmcvbVplNTE4ZkpZQVZBY1puUTR2RklMUmQveU5jcUpjVjJ1VnUzek9PRHQyZkYvZmRPRGxYQjY5YU1qZ2pXZVJ4YzZLWXVtRmlWZ2lySlVhN2MvR1Fqd0FBendQY2FTa3ZDbzNJZFU0MDdsbmlIVFl4R0VWdVFKelZQdEYyZHRGRlYwN2pjbTRqeHZFVDN0SjFBVnhNK0hqRENYWVdmVTdoeEFQVGg2eEx1ekUxZ1grbGJ3PT08L2RzOlNpZ25hdHVyZVZhbHVlPjwvZHM6U2lnbmF0dXJlPjxzYW1sMjpTdWJqZWN0PjxzYW1sMjpOYW1lSUQgRm9ybWF0PVwidXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6MS4xOm5hbWVpZC1mb3JtYXQ6dW5zcGVjaWZpZWRcIj50ZXN0dXNlcjwvc2FtbDI6TmFtZUlEPjxzYW1sMjpTdWJqZWN0Q29uZmlybWF0aW9uIE1ldGhvZD1cInVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDpjbTpiZWFyZXJcIj48c2FtbDI6U3ViamVjdENvbmZpcm1hdGlvbkRhdGEgTm90T25PckFmdGVyPVwiMjAxNi0wOS0zMFQxNToyNTozMi4wODJaXCIvPjwvc2FtbDI6U3ViamVjdENvbmZpcm1hdGlvbj48L3NhbWwyOlN1YmplY3Q-PHNhbWwyOkNvbmRpdGlvbnMgTm90QmVmb3JlPVwiMjAxNi0wOS0zMFQxMToyMDozMi4wODJaXCIgTm90T25PckFmdGVyPVwiMjAxNi0wOS0zMFQxNToyNTozMi4wODJaXCIvPjxzYW1sMjpBdXRoblN0YXRlbWVudCBBdXRobkluc3RhbnQ9XCIyMDE2LTA5LTMwVDExOjI1OjMyLjA4MlpcIiBTZXNzaW9uTm90T25PckFmdGVyPVwiMjAxNi0wOS0zMFQxMTozMDozMi4wODJaXCI-PHNhbWwyOkF1dGhuQ29udGV4dD48c2FtbDI6QXV0aG5Db250ZXh0Q2xhc3NSZWY-dXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmFjOmNsYXNzZXM6UGFzc3dvcmQ8L3NhbWwyOkF1dGhuQ29udGV4dENsYXNzUmVmPjwvc2FtbDI6QXV0aG5Db250ZXh0Pjwvc2FtbDI6QXV0aG5TdGF0ZW1lbnQ-PC9zYW1sMjpBc3NlcnRpb24-IiwieHMudXNlci5hdHRyaWJ1dGVzIjp7fSwieHMuc3lzdGVtLmF0dHJpYnV0ZXMiOnsieHMuc2FtbC5ncm91cHMiOlsiYWxsYXV0aF9jb20tc2FwIl0sInhzLnJvbGVjb2xsZWN0aW9ucyI6WyJyY19qb3NoeV82IiwicmNfam9zaHlfNSIsIlRoaW5nX2FsbGF1dGhfc2FuZGJveF9jb20tc2FwIiwiYWxsYXV0aF9jb20tc2FwIl19LCJhdWQiOlsiZmlsZV9jaSIsImF1dGhfY2kuQ29uZmlndXJhdGlvbiIsInRlbmFudF9jaS50ZW5hbnQiLCJjb2xkc3RvcmVfY2kiLCJvcGVuaWQiLCJ0ZW5hbnRfY2kucGVycyIsImF1dGhfY2kub2dhIiwidGVuYW50X2NpLm9yZyIsImF1dGhfY2kiLCJ0ZW5hbnRfY2kiLCJ0aGluZ19jaSIsInNiLWlvdGFzX2NpIiwiY3RvZGF0YV9jaSIsImJwX2NpIiwiY29uZl9jaSIsInRoaW5nX2NpLkV2ZW50IiwidGRlX2NpIiwibG9jX2NpIiwiYnBfY2kuQ29uZmlndXJhdGlvbiIsImJwX2NpLnRlbmFudCIsInRoaW5nX2NpLkNvbmZpZ3VyYXRpb24iLCJ4c19hdXRob3JpemF0aW9uIiwiY3RfY2kiXX0.fvv2YT1X3WgE2Wm9iNOTCJo7sPy9ir6JYCJBRE0hBi4icVG-L1Bxo0_Acwjf6Gjgj2Vq1qxKsz1PqMfWJ_7HgrP8ZJLBzV2s95OS7I3xOp-0gAcTS_xB_2tSvenY0HcnrqTc6hF4AWZfAlXXpGeF5077htpzgkuI7cAxN-fpp-dMXkX8wOrMrdSd6AnlB_ysMZS09dM2reSPrtc7ZGXSkrGKUt1cBJEEsROeVadaUXnecuzrpitueV39HQu_JCSPc5W8kMFtsSRAc4l5P8YsSgEqfa3r-2lcOrcNgkUTHHbdHARrjm7zsM7rKN6yqE-FSesPrXsUH8taugkts_J1wA"	
					},
				contentType: "binary/octet-stream",
				processData: false,
				data: file,
				xhr: function() {
                    myXhr = $.ajaxSettings.xhr();
                    if(myXhr.upload){
                        myXhr.upload.addEventListener('progress', function(oEvent){
                    		var done = oEvent.loaded;
                    		var total = oEvent.total;
                    		var doneValue = Math.round(done/total*100);
                    		oProgressIndicator.setPercentValue(doneValue);
                    		oProgressIndicator.setDisplayValue(doneValue + "%");
                    	}, false);
                    }
                    return myXhr;
                },
				success: function(){
					oDialog.close();
					sap.ui.commons.MessageBox.show("File Uploaded Successfully", "SUCCESS");
				},
				error: function(){
					oDialog.close();
					sap.ui.commons.MessageBox.show("File Upload Failed", "ERROR")
				}
			});
		} catch(oException) {
			sap.ui.getCore().byId("busyDialog").close();
			sap.ui.commons.MessageBox.alert("Error in File Upload - " + oException.message, "ERROR")
		}
	},
	renderer : {
	},
});